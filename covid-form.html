<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>Hello, world!</title>

    <style>
        .debug-off {
            border: 1px solid green;
        }

        .question {
            border-radius: 10px;
            background-color: beige;
            padding: 25px;
        }
    </style>
</head>

<body>

    <div class="container debug">
        <h1>COVID-19 Community Survey</h1>

        <div class="row d-flex justify-content-center debug">

            <!--Grid column-->
            <div class="col-md-10 debug">
                <p>This survey is a community-based screening tool, from the <a href="https://rhicenter.org/">Red Hook
                        Initiative</a> and
                    <a href="https://council.nyc.gov/district-38/">Council Member Carlos Menchaca</a>, to identify those
                    at medical risk during the COVID-19
                    pandemic. The tool helps identify people with COVID-19-specific symptoms, and those
                    who have greater health risks overall during the pandemic. This information helps
                    community organizations and medical services provide support to you and your community.
                    By completing this survey, and agreeing to consent, you confirm that our community relief
                    effort can store and analyze this data, which we will use to help connect you with resources
                    if needed or if possible, and inform healthcare providers about the needs of you and your
                    community. By using this tool, you agree that our relief effort is not liable for the
                    outcome of its use.
                </p>

                <p>Local resources to stay up-to-date with this relief effort and local recommendations:
                    <ul>
                        <a href="https://c19check.com/start">COVID-19-specific risk calculator</a>
                        <a href="http://redhookhub.org/coronavirus/">Red Hook HUB: COVID-19 info page</a>
                        <a href="https://www1.nyc.gov/site/doh/covid/covid-19-main.page">NYC.gov: COVID-19 info page</a>
                        FREE phone-based medicine consultation: 1-844-NYC-4NYC (1-844-692-4692)
                        NYC mental health/counseling: 1-844-863-9314
                    </ul>
                    This tool was built by a team including <a href="https://tech.cornell.edu/">Cornell Tech</a>, <a
                        href="https://urbantechnyc.com/">The GRID</a>, and medical-science volunteers <a
                        href="https://www.matthewkraushar.com/">here</a> and <a
                        href="https://www.linkedin.com/in/tom-pisano-41959243/">here</a>.
                </p>
            </div>
        </div>

        <script id="text-field-template" type="text/x-handlebars-template">
            <div class="row d-flex justify-content-center debug">
                <div class="col-md-8 debug question">
                    <div class="form-group">
                        <label for="{{label_for}}">{{label_value}}</label>
                        <input type="text" class="form-control" name="{{name}}" id="{{id}}"
                            placeholder="{{placeholder}}">
                    </div>
                </div>
            </div>
        </script>

        <script id="radio-field-template" type="text/x-handlebars-template">
        <div class="row d-flex justify-content-center debug">
            <div class="col-md-8 debug question">
                <div class="form-group">
                    <label for="{{label_for}}">{{{label_value}}}</label>
                    {{#each choices}}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="{{../name}}" {{#if @first}} checked {{/if}} id="{{id}}_{{this}}"
                            value="{{this.value}}">
                        <label class="form-check-label">{{this.label}}</label>
                    </div>
                    {{/each  }}
                </div>
            </div>
        </div>
        </script>

        <script id="check-field-template" type="text/x-handlebars-template">
            <div class="row d-flex justify-content-center debug">
                <div class="col-md-8 debug question">
                    <div class="form-group">
                        <label for="{{label_for}}">{{{label_value}}}</label>
                        <input class="form-check-input" type="checkbox" name="{{name}}" id="{{id}}_default" value="" checked style="display:none;">
                        {{#each choices}}
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="{{../name}}" id="{{id}}_{{this}}"
                                value="{{this.value}}">
                            <label class="form-check-label">{{this.label}}</label>
                        </div>
                        {{/each  }}
                    </div>
                </div>
            </div>
            </script>


        <script>

        </script>

        <form id="survey_form" onsubmit='onSubmit(this); return false;'>

            <div id='survey_questions'></div>


            <input type="hidden" name="survey_check" id="survey_check" value="Done">

            <div class="row d-flex justify-content-center debug">
                <hr />
            </div>

            <div class="row d-flex justify-content-center debug">
                <div class="col-md-8 debug text-center">
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </div>


        </form>

        <!--Grid column-->


    </div>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <script src="gettext.iife.js"></script>

    <script>
        function onSubmit(form) {
            var data = JSON.stringify($(form).serializeArray()); //  <-----------
            console.log(data);

            try {
                $.ajax({
                    url: "https://us-central1-cornell-tech-sso.cloudfunctions.net/function-1",
                    type: "POST",
                    data: data,
                    contentType: "application/json",
                    complete: function () { console.log('Complete'); }
                });
            } catch (err) {
                console.log(err);
            }

            return false; //don't submit
        };


        function string_to_slug(str) {
            str = str.replace(/^\s+|\s+$/g, ''); // trim
            str = str.toLowerCase();

            // remove accents, swap ñ for n, etc
            var from = "àáãäâèéëêìíïîòóöôùúüûñç·/_,:;";
            var to = "aaaaaeeeeiiiioooouuuunc------";

            for (var i = 0, l = from.length; i < l; i++) {
                str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));
            }

            str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars
                .replace(/\s+/g, '-') // collapse whitespace and replace by -
                .replace(/-+/g, '-'); // collapse dashes

            return str;
        }



        var i18n = window.i18n({});

        function _c(str) {
            return { 'value': string_to_slug(str), 'label': i18n.gettext(str) };
        }

        TRANSLATIONS =
            [
                {
                    'default': 'Name',
                    'fr': 'Nom',
                    'es': 'Nombre',
                    'ch': "姓名",
                    'ru': "имя",
                    'ko': "성명"
                },
                {
                    'default': 'Phone',
                    'fr': 'Téléphone',
                    'es': 'Teléfono',
                    'ch': "Phone number ",
                    'ru': "омер телефона",
                    'ko': "전화번호"
                },
                {
                    'default': 'Enter your name',
                    'fr': 'Entrez votre nom',
                    'es': 'Introduzca su nombre',
                    'ch': "格式：先名  后姓",
                    'ru': "Введите ваше имя",
                    'ko': "형식: 이름 성"
                },
                {
                    'default': 'Enter your phone number',
                    'fr': 'Entrez votre numéro de téléphone',
                    'es': 'Ingrese su número telefónico',
                    'ch': "格式：XXX-XXX-XXXX",
                    'ru': "Введите свой номер телефона",
                    'ko': "전화 번호를 입력하십시오"
                },
                {
                    'default': 'Yes',
                    'fr': 'Oui',
                    'es': 'Si',
                    'ch': "是",
                    'ru': "да",
                    'ko': "예"
                },
                {
                    'default': 'No',
                    'fr': 'Non',
                    'es': 'No',
                    'ch': "没有",
                    'ru': "нет",
                    'ko': "아니"
                },
                { //Q3
                    'default': 'How was this survey performed?',
                    'fr': 'Comment cette enquête a-t-elle été réalisée',
                    'es': '¿Cómo se realizó esta encuesta?',
                    'ch': "问卷通话何种语言进行",
                    'ru': "Как проводился этот опрос?",
                    'ko': "이 설문 조사는 어떻게 수행 되었습니까?"
                },
                {
                    'default': "Online",
                    'fr': "En ligne",
                    'es': "En línea",
                    'ch': "线上",
                    'ru': "онлайн",
                    'ko': "온라인"
                },
                {
                    'default': "By phone",
                    'fr': "Par téléphone",
                    'es': "Por teléfono",
                    'ch': "通过电话",
                    'ru': "По телефону",
                    'ko': "전화로"
                },
                {
                    'default': "Could not contact by phone",
                    'fr': "Impossible de contacter par téléphone",
                    'es': "No se pudo contactar por teléfono",
                    'ch': "无法通过电话联系",
                    'ru': "Не удалось связаться по телефону",
                    'ko': "전화로 연락 할 수 없습니다"
                },
                {//Q4
                    'default': "Language used for this survey",
                    'fr': "Langue utilisée pour cette enquête",
                    'es': "Idioma utilizado para esta encuesta",
                    'ch': "本调查使用的语言",
                    'ru': "Язык, используемый для этого опроса",
                    'ko': "이 설문에 사용 된 언어"
                },
                {//Q5
                    'default': "We're collecting information about your needs, such as health conditions, in order to connect you with resources. Do we have consent from you to record this information for our support team to get you resources? Your responses will only be kept within our support team.",
                    'fr': "Nous collectons des informations sur vos besoins, tels que les conditions de santé, afin de vous connecter avec des ressources. Avons-nous votre consentement pour enregistrer ces informations afin que notre équipe d'assistance vous obtienne des ressources? Vos réponses ne seront conservées qu'au sein de notre équipe d'assistance.",
                    'es': "Recopilamos información sobre sus necesidades, como las condiciones de salud, para conectarlo con los recursos. ¿Tenemos su consentimiento para registrar esta información para que nuestro equipo de soporte obtenga recursos? Sus respuestas solo se mantendrán dentro de nuestro equipo de soporte.",
                    'ch': "我们将收集有关您的需求的信息，例如健康状况，以便为您匹配所需的资源。您是否同意我记录您的回答？您的回答将只用于我们团队的内部决策，不会与其他人分享。",
                    'ru': "Мы собираем информацию о Ваших нуждах, в том числе, о состоянии здоровью, с тем чтобы предоставить Вам необходимые ресурсы. Разрешаете ли Вы нам записать эту информацию, с тем чтобы наша группа поддержки смогла предоставить Вам эти ресурсы? Ваша информация будет храниться только в группе поддержки. Отметьте только один вариант",
                    'ko': "저희는 귀하에게 도움이 되는 자료들을 제공하기 위하여 건강 상태와 같은 귀하의 필요 사항에 관한 정보들을 수집하고 있습니다. 저희 지원팀이 귀하에게 알맞은 리소스들을 제공할 수 있도록 이 정보들을 기록하는 것에 동의하십니까? 귀하의 답변들은 지원팀 내에서만 유지됩니다."
                },
                {//Q6
                    'default': "What are the ages of you and everyone in your household? (Check the box of each age range that applies, the total number of members in the household is not relevant)",
                    'fr': "Quel âge avez-vous et tous les membres de votre ménage? (Cochez la case de chaque tranche d'âge qui s'applique, le nombre total de membres dans le ménage n'est pas pertinent)",
                    'es': "¿Cuáles son las edades de usted y de todos en su hogar? (Marque la casilla de cada rango de edad que aplique, el número total de miembros en el hogar no es relevante)",
                    'ch': "",
                    'ru': "Каков Ваш возраст и возраст проживающих с Вами членов семьи?",
                    'ko': "본인을 포함한 가족 구성원 모두의 나이가 무엇입니까? (가족 인원 수와 상관 없이 해당 되는 연령대를 전부 선택하십시오.)"
                },
                {
                    'default': "Under",
                    'fr': "Sous",
                    'es': "Debajo",
                    'ch': "",
                    'ru': "Под",
                    'ko': "아래에"
                },
                {
                    'default': "Year old",
                    'fr': "Age",
                    'es': "Edad",
                    'ch': "",
                    'ru': "Годовалый",
                    'ko': "살"
                },
                {
                    'default': "Year olds",
                    'fr': "Ans",
                    'es': "Años de edad",
                    'ch': "",
                    'ru': "Лет",
                    'ko': "살이에요"
                },
                {//Q7
                    'default': "Right now, are you or any members of your household experiencing symptoms consistent with Corona Virus infection? READ LIST BELOW.  IF ANSWER = DIFFICULTY BREATHING or CHEST PAIN, RESPONSE = 'CALL YOUR DOCTOR FIRST IF YOU HAVE ONE. IF YOU DO NOT HAVE A DOCTOR, CAN CALL: 1-844-NYC-4NYC (1-844-692-4692). IF THIS IS AN EMERGENCY, CALL 911.",
                    'fr': "À l'heure actuelle, est-ce que vous ou un membre de votre ménage ressentez des symptômes compatibles avec une infection par le virus Corona? LISEZ LA LISTE CI-DESSOUS. SI RÉPONSE = DIFFICULTÉ RESPIRATION OU DOULEUR DE POITRINE, RÉPONSE = 'APPELEZ VOTRE MÉDECIN D'ABORD SI VOUS EN AVEZ UN. SI VOUS N'AVEZ PAS DE MÉDECIN, VOUS POUVEZ APPELER: 1-844-NYC-4NYC (1-844-692-4692). EN CAS D'URGENCE, COMPOSER LE 911.",
                    'es': "En este momento, ¿usted o algún miembro de su hogar experimenta síntomas consistentes con la infección por el virus Corona? LEA LA LISTA A CONTINUACIÓN. SI RESPUESTA = DIFICULTAD RESPIRACIÓN O DOLOR EN EL PECHO, RESPUESTA = 'LLAME A SU MÉDICO PRIMERO SI TIENE UNO. SI NO TIENE UN MÉDICO, PUEDE LLAMAR AL: 1-844-NYC-4NYC (1-844-692-4692). SI ESTO ES UNA EMERGENCIA, LLAME AL 911.",
                    'ch': "",
                    'ru': "Имеете ли Вы или проживающие с Вами члены семьи следующие симптомы, соответствующие коронавирусной инфекции? Зачитайте список ниже. Если среди отмеченных вариантов есть «Затрудненное дыхание» или «Боль в груди», Ваш ответ «ЕСЛИ У ВАС ЕСТЬ СВОЙ ВРАЧ, ПОЗВОНИТЕ ЕМУ. ЕСЛИ У ВАС НЕТ ВРАЧА, ПОЗВОНИТЕ ПО НОМЕРУ 1-844-NYC-4NYC (1-844-692-4692). В ЭКСТРЕННОМ СЛУЧАЕ НАБЕРИТЕ 911». Отметьте все подходящие варианты",
                    'ko': "현재 본인을 포함한 가족 구성원 중 코로나바이러스감염증-19 관련 증상을 겪고 있는 사람이 있습니까? 아래 항목을 읽어주십시오. 만약 호흡곤란 혹은 가슴통증을 답변으로 골랐다면 주치의에게 연락하십시오. 주치의가 없다면 1-844-692-4692로 전화하십시오. 응급 시엔 911에 전화하십시오."
                },
                {
                    'default': 'Fever',
                    'fr': 'Fièvre',
                    'es': 'Fiebre',
                    'ch': "",
                    'ru': "Температура",
                    'ko': "발열"
                },
                {
                    'default': "Chills",
                    'fr': "Frissons",
                    'es': "Resfriado",
                    'ch': "",
                    'ru': "Озноб",
                    'ko': "오한"
                },
                {
                    'default': "Cough",
                    'fr': "La toux",
                    'es': "Tos",
                    'ch': "",
                    'ru': "Кашель",
                    'ko': "기침"
                },
                {
                    'default': "Difficulty breathing",
                    'fr': "Difficulté à respirer",
                    'es': "Respiración dificultosa",
                    'ch': "",
                    'ru': "Затрудненное дыхание",
                    'ko': "호흡곤란"
                },
                {
                    'default': "Chest pain",
                    'fr': "Douleur de poitrine",
                    'es': "Dolor de pecho",
                    'ch': "",
                    'ru': "Грудная боль",
                    'ko': "가슴통증"
                },
                {
                    'default': "Fatigue",
                    'fr': "Fatigue",
                    'es': "Fatiga",
                    'ch': "",
                    'ru': "Усталость",
                    'ko': "피로"
                },
                {
                    'default': "Diarrhea",
                    'fr': "Diarrea",
                    'es': "La diarrhée",
                    'ch': "",
                    'ru': "понос",
                    'ko': "설사"
                },
                {
                    'default': "Not experiencing any symptoms",
                    'fr': "Ne ressentant aucun symptôme",
                    'es': "No experimenta ningún síntoma",
                    'ch': "",
                    'ru': "Не испытывает никаких симптомов",
                    'ko': "의심 증상 없음"
                },
                {//Q8
                    'default': "Do you or any member of your household suffer from any of the following? [If ANY one of these, please indicate 'Yes'] READ LIST: High blood pressure, diabetes, heart disease or prior heart attack, lung disease (like asthma, COPD, emphysema, bronchitis), kidney disease or require dialysis, compromised immune system (eg. taking steroids or immunosuppressants, sickle cell disease, cancer, HIV/AIDS), psychiatric illness.",
                    'fr': "Est-ce que vous ou un membre de votre ménage souffrez de l'un des symptômes suivants? [Si n'importe lequel d'entre eux, veuillez indiquer «Oui»] LIRE LA LISTE: Hypertension artérielle, diabète, maladie cardiaque ou crise cardiaque antérieure, maladie pulmonaire (comme l'asthme, la MPOC, l'emphysème, la bronchite), maladie rénale ou nécessiter une dialyse, immunodéprimé compromis système (p. ex. prise de stéroïdes ou d'immunosuppresseurs, drépanocytose, cancer, VIH / sida), maladie psychiatrique.",
                    'es': "¿Usted o algún miembro de su hogar sufre alguno de los siguientes síntomas? [Si ALGUNO de estos, indique 'Sí'] LISTA DE LECTURA: presión arterial alta, diabetes, enfermedad cardíaca o ataque cardíaco previo, enfermedad pulmonar (como asma, EPOC, enfisema, bronquitis), enfermedad renal o requiere diálisis, inmunidad comprometida sistema (p. ej., tomar esteroides o inmunosupresores, anemia falciforme, cáncer, VIH / SIDA), enfermedad psiquiátrica.",
                    'ch': "",
                    'ru': "Страдаете ли вы или кто-либо из членов вашей семьи каким-либо из следующих факторов? [Если ЛЮБОЙ из них, пожалуйста, укажите «Да»] ПРОЧИТАЙТЕ СПИСОК: Высокое кровяное давление, диабет, сердечные заболевания или перенесенные инфаркты, заболевания легких (например, астма, ХОБЛ, эмфизема, бронхит), заболевания почек или требуется диализ, нарушение иммунитета система (например, прием стероидов или иммунодепрессантов, серповидно-клеточная анемия, рак, ВИЧ / СПИД), психиатрические заболевания.",
                    'ko': "귀하 또는 귀하의 가구 구성원이 다음 중 하나를 앓고 있습니까? [이들 중 하나라도 있으면 '예'를 표시하십시오.] 읽기 목록 : 고혈압, 당뇨병, 심장병 또는 이전 심장 마비, 폐 질환 (예 : 천식, COPD, 폐기종, 기관지염), 신장 질환 또는 투석이 필요한 면역 시스템 (예 : 스테로이드 또는 면역 억제제, 겸상 적혈구 질환, 암, HIV / AIDS), 정신 질환."
                },
                {//Q9
                    'default': "Do you have a primary care physician? This is the first person you should contact with your health concerns; unless it is an emergency, then dial 911.",
                    'fr': "Avez-vous un médecin de premier recours? Il s'agit de la première personne à contacter pour vos problèmes de santé; sauf en cas d'urgence, composez le 911.",
                    'es': "¿Tiene un médico de atención primaria? Esta es la primera persona que debe contactar con sus preocupaciones de salud; a menos que sea una emergencia, marque 911.",
                    'ch': "",
                    'ru': "Есть ли у вас врач первичной помощи (терапевт)? Это первый человек, к которому Вам следует обратиться в случае, если у Вас есть вопросы, связанные со здоровьем; в экстренном случае наберите 911.  Отметьте только один вариант",
                    'ko': "주치의가 있습니까? (주치의는 건강 이상 문제와 관련하여 가장 우선 연락을 취해야 할 사람입니다. 응급 시에는 911에 전화하십시오.)"
                },
                {
                    'default': "Yes, and I CAN get in touch with them",
                    'es': "Sí, y PUEDO ponerme en contacto con ellos.",
                    'fr': "Oui, et JE PEUX les contacter",
                    'ch': "",
                    'ru': "Да и я МОГУ связаться с ним/ней",
                    'ko': "네, 주치의와 연락이 가능한 상황입니다."
                },
                {
                    'default': "Yes, but I CAN NOT get in touch with them",
                    'fr': "Oui, mais je ne peux pas les contacter",
                    'es': "Sí, pero NO PUEDO ponerme en contacto con ellos.",
                    'ch': "",
                    'ru': "Да, но я НЕ МОГУ связаться с ним/ней",
                    'ko': "네, 하지만 주치의와 연락이 되지 않습니다."
                },
                {//Q10
                    'default': "Does anyone in your household require any essential medications or routine treatments? GIVE examples: Oxygen, breathing machine or breathing treatments, insulin, dialysis, blood thinners.",
                    'fr': "Quelqu'un dans votre ménage a-t-il besoin de médicaments essentiels ou de traitements de routine? DONNER des exemples: oxygène, appareil respiratoire ou traitements respiratoires, insuline, dialyse, anticoagulants.",
                    'es': "¿Alguien en su hogar requiere medicamentos esenciales o tratamientos de rutina? DÉ ejemplos: oxígeno, máquina de respiración o tratamientos de respiración, insulina, diálisis, anticoagulantes.",
                    'ch': "",
                    'ru': "Нуждаетесь ли Вы или проживающие с Вами члены семьи в жизненно важных медикаментах или регулярных лечебных процедурах? Зачитайте примеры: кислород, дыхательный аппарат, дыхательные процедуры, инсулин, диализ, разжижители крови.  Отметьте только один вариант",
                    'ko': "가족 구성원 중 필수적으로 복용해야 하는 약물 및 규칙적인 치료가 필요한 사람이 있습니까? 예시: 산소호흡기, 인공호흡기/호흡 치료, 인슐린, 투석, 항응혈제"
                },
                {
                    'default': "Yes, and I HAVE enough medicine or access to treatment",
                    'fr': "Oui, et j'ai suffisamment de médicaments ou accès au traitement",
                    'es': "Sí, y TENGO suficiente medicamento o acceso al tratamiento.",
                    'ch': "",
                    'ru': "Да и у меня ЕСТЬ достаточно медикаментов и доступ к лечебным процедурам",
                    'ko': "네, 충분한 약물을 확보하고 있으며 치료에 대한 접근이 용이한 상태입니다"
                },
                {
                    'default': "Yes, and I DO NOT HAVE enough medicine or access to treatment",
                    'fr': "Oui, et je N'AI PAS assez de médicaments ou accès au traitement",
                    'es': "Sí, y NO TENGO suficientes medicamentos ni acceso al tratamiento.",
                    'ch': "",
                    'ru': "Да, но у меня НЕТ достаточного количества медикаментов и доступа к лечебным процедурам",
                    'ko': "네, 하지만 충분한 약물 및 치료에 대한 접근 용이성을 확보하지 못하고 있습니다."
                },
                {
                    'default': "Unsure",
                    'fr': "Incertain",
                    'es': "Inseguro",
                    'ch': "",
                    'ru': "Не уверен(а)",
                    'ko': "잘 모름"
                },
                {//Q11
                    'default': "Do you or any member of your household require access to a healthcare facility in the next three weeks?",
                    'fr': "Vous ou un membre de votre ménage avez-vous besoin d'accéder à un établissement de santé au cours des trois prochaines semaines?",
                    'es': "¿Usted o algún miembro de su hogar necesita acceso a un centro de salud en las próximas tres semanas?",
                    'ch': "",
                    'ru': "Потребуется ли Вам или проживающим с Вами членам семьи доступ в медицинское учреждение в следующие три недели? Отметьте только один вариант",
                    'ko': "본인을 포함한 가족 구성원 중 지금 시점으로부터 3주 내에 의료시설에 방문해야 하는 사람이 있습니까?"
                },
                {//Q12
                    'default': "Does anyone in your household require mobility assistance, such as a wheelchair?",
                    'fr': "Un membre de votre ménage a-t-il besoin d'une aide à la mobilité, comme un fauteuil roulant?",
                    'es': "¿Alguien en su hogar necesita asistencia de movilidad, como una silla de ruedas?",
                    'ch': "",
                    'ru': "Нуждаетесь ли Вы или проживающие с Вами члены семьи в помощи с передвижением, например, в инвалидном кресле? Отметьте только один вариант",
                    'ko': "가족 구성원 중 거동 시 휠체어 등의 도움이 필요한 사람이 있습니까?"
                },
                {//Q13
                    'default': "This is a chaotic time which can feel overwhelming and anxious. Do you feel speaking to a counselor would be helpful?   If yes, can call NYC mental health/counseling support: +1 (844) 863-9314. Alternatively, can call NYC Well 24/7/365 at 1-888-NYC-WELL (1-888-692-9355) or text WELL to 65173",
                    'fr': "C'est une période chaotique qui peut se sentir accablante et angoissée. Pensez-vous qu'il serait utile de parler à un conseiller? Si oui, vous pouvez appeler le soutien en santé mentale / conseil de New York: +1 (844) 863-9314. Vous pouvez également appeler NYC Well 24/7/365 au 1-888-NYC-WELL (1-888-692-9355) ou envoyer un SMS WELL au 65173",
                    'es': "Este es un momento caótico que puede sentirse abrumador y ansioso. ¿Sientes que hablar con un consejero sería útil? En caso afirmativo, puede llamar al apoyo de salud mental / asesoramiento de NYC: +1 (844) 863-9314. Alternativamente, puede llamar a NYC Well 24/7/365 al 1-888-NYC-WELL (1-888-692-9355) o enviar un mensaje de texto WELL al 65173",
                    'ch': "",
                    'ru': "Сложившаяся сложная ситуация может вызывать тревогу и состояние подавленности. Считаете ли Вы, что разговор с консультантом мог бы быть Вам полезным? Если да, Вы можете позвонить в службу психологической поддержки и консультирования по номеру +1 (844) 863-9314. Вы также можете позвонить в службу NYC Well в режиме 24/7/365 по телефону 1-888-NYC-WELL (1-888-692-9355) или отправить сообщение WELL на номер 65173. Отметьте только один вариант",
                    'ko': "현재 혼란스러운 상황으로 인하여 힘들고 불안할 수 있습니다. 이를 해결하기 위해 상담가와 상담하는 것이 도움이 될 것 같다고 느끼십니까? 만약 그렇다면 뉴욕 정신 상담 센터 (NYC mental health/counseling support)에 +1 (844) 863-9314로 전화하실 수 있습니다. 혹은, NYC Well 24/7/365 에 1-888-692-9355로 전화를 걸거나 65173 번호로 WELL이라고 문자 하실 수 있습니다. Red Hook에서는 공식 웹사이트(http://redhookhub.org/coronavirus/)를 통해 도움을 받을 수 있습니다."
                },
                {//Q14
                    'default': "Can we have your email address so that we can follow up with you with Coronavirus information and resources?",
                    'fr': "Pouvons-nous avoir votre adresse e-mail afin que nous puissions vous contacter avec des informations et des ressources sur le coronavirus?",
                    'es': "¿Podemos tener su dirección de correo electrónico para que podamos darle seguimiento con información y recursos de Coronavirus?",
                    'ch': "",
                    'ru': "Можете ли Вы предоставить нам свой адрес электронной почты, чтобы мы прислали Вам информацию о коронавирусе и другие ресурсы?",
                    'ko': "이메일 주소가 무엇입니까? 이메일로 코로나바이러스감염증-19에 관한 정보와 자료를 제공해드립니다."
                },
                {
                    'default': "Enter your email here",
                    'fr': "Entrez votre email ici",
                    'es': "Introduzca su correo electrónico aquí",
                    'ch': "",
                    'ru': "Введите адрес электронной почты здесь",
                    'ko': "여기에 이메일을 입력하십시오"
                },
                {//Q15
                    'default': "Can we have your address or building number?",
                    'fr': "Pouvons-nous avoir votre adresse ou votre numéro de bâtiment?",
                    'es': "¿Podemos tener su dirección o número de edificio?",
                    'ch': "",
                    'ru': "Можете ли Вы предоставить нам свой адрес или номер дома?",
                    'ko': "주소 혹은 건물번호가 무엇입니까?"
                },
                {
                    'default': "Enter your address here",
                    'fr': "Entrez votre adresse ici",
                    'es': "Ingrese su dirección aquí",
                    'ch': "",
                    'ru': "Введите свой адрес здесь",
                    'ko': "여기에 주소를 입력하십시오"
                },
                {//Q16
                    'default': "Can we have your zip code?",
                    'fr': "Pouvons-nous avoir votre code postal?",
                    'es': "¿Podemos tener su código postal?",
                    'ch': "",
                    'ru': "Можете ли Вы предоставить нам свой почтовый индекс?",
                    'ko': "우편번호가 무엇입니까?"
                },
                {
                    'default': "Enter your zip code here",
                    'fr': "Entrez votre code postal ici",
                    'es': "Ingrese su código postal aquí",
                    'ch': "",
                    'ru': "Введите свой почтовый индекс здесь",
                    'ko': "여기에 우편 번호를 입력하십시오"
                },
                {//Q17
                    'default': "We have asked you a number of questions today to help organize resources for you during these challenging times. To confirm, do you consent to us documenting this information? Your responses will only be kept within our support team.",
                    'fr': "Nous vous avons posé un certain nombre de questions aujourd'hui pour vous aider à organiser les ressources pour vous en ces temps difficiles. Pour confirmer, acceptez-vous que nous documentions ces informations? Vos réponses ne seront conservées qu'au sein de notre équipe d'assistance.",
                    'es': "Le hemos hecho una serie de preguntas hoy para ayudarlo a organizar recursos para usted durante estos tiempos difíciles. Para confirmar, ¿acepta que documentemos esta información? Sus respuestas solo se mantendrán dentro de nuestro equipo de soporte.",
                    'ch': "",
                    'ru': "Мы задали Вам несколько вопросов, чтобы предоставить Вам ресурсы, необходимые в такой сложный период. Подтвердите, пожалуйста, что Вы разрешаете нам задокументировать полученную информацию. Ваша информация будет храниться только в группе поддержки. Отметьте только один вариант",
                    'ko': "코로나바이러스감염증-19으로 인해 어려운 상황 속 필요한 정보를 수집하고 확인하고자 오늘의 설문이 진행되었습니다. 정보 제공에 동의하십니까? 제공하신 모든 답변은 Red Hook지원 팀 내부에서만 공유됩니다."
                },
                {//Q18
                    'default': "We understand that at this time there is a lot a fear associated with the Corona Virus. By participating in this survey we are making sure that you, your family, and friends have the most accurate information available at this time, and access the support you need to address the symptoms of the virus. Finally by sharing your needs with us we will work to make sure Red Hook receives all the support and resources necessary to get through this crisis period. You can stay up to date on all Coronavirus related news and resources at www.redhookhub.org. Please share anything else below:",
                    'fr': "Nous comprenons qu'en ce moment il y a beaucoup de peur associée au virus Corona. En participant à cette enquête, nous nous assurons que vous, votre famille et vos amis disposez des informations les plus précises disponibles à l'heure actuelle, et accédez au support dont vous avez besoin pour lutter contre les symptômes du virus. Enfin, en partageant vos besoins avec nous, nous travaillerons pour nous assurer que Red Hook reçoive tout le soutien et les ressources nécessaires pour traverser cette période de crise. Vous pouvez rester à jour sur toutes les nouvelles et ressources liées au Coronavirus sur www.redhookhub.org. Veuillez partager autre chose ci-dessous:",
                    'es': "Entendemos que en este momento hay mucho miedo asociado con el Virus Corona. Al participar en esta encuesta, nos aseguramos de que usted, su familia y amigos tengan la información más precisa disponible en este momento y accedan al soporte que necesita para abordar los síntomas del virus. Finalmente, al compartir sus necesidades con nosotros, trabajaremos para asegurarnos de que Red Hook reciba todo el apoyo y los recursos necesarios para superar este período de crisis. Puede mantenerse actualizado sobre todas las noticias y recursos relacionados con Coronavirus en www.redhookhub.org. Por favor comparta cualquier otra cosa a continuación:",
                    'ch': "",
                    'ru': "Мы понимаем, что в настоящее время с коронавирусом связано много страхов. Принимая участие в этом опросе, Вы помогаете нам убедиться, что Вы, Ваша семья и Ваши друзья обладаете наиболее актуальной на данный момент информацией и получаете поддержку, необходимую, чтобы справиться с симптомами вируса. Наконец, сообщая нам о Ваших нуждах, Вы помогает Red Hook получить все необходимые ресурсы и поддержку, чтобы пройти через этот кризисный период. Вы можете найти актуальную информацию и ресурсы, связанные с коронавирусом, на сайте www.redhookhub.org. Пожалуйста, поделитесь чем-нибудь еще ниже:",
                    'ko': "현재 코로나 바이러스로 인하여 많은 분들이 두려워하고 계십니다. 이 설문 조사에 참여하심으로써 귀하와 귀하의 가족 및 친구들이 가장 최신의 정확한 정보를 얻고 바이러스 증상을 해결하는 데 필요한 정보 및 지원을 받으실 수 있습니다. 마지막으로 귀하의 필요 사항을 저희와 공유함으로써 저희는 레드 훅이 이 위기 기간을 극복하는 데 필요한 모든 지원과 리소스를 받도록 노력할 것입니다. 또 한 www.redhookhub.org에서 모든 코로나 바이러스 관련 최신 뉴스 및 자료를 확인하실 수 있습니다. 아래에 다른 것을 공유하십시오 :"
                },
                {
                    'default': "Short answer here",
                    'fr': "Réponse courte ici",
                    'es': "Respuesta corta aquí",
                    'ch': "",
                    'ru': "Краткий ответ здесь",
                    'ko': "여기에 짧은 대답"
                },

            ];

        LANGUAGES = ['fr', 'es', 'ch', 'ru', 'ko'];

        LANGUAGES.forEach(language => {
            var data = {};
            TRANSLATIONS.forEach(item => {
                if (language in item) {
                    data[item['default']] = item[language];
                }
            });
            //console.log(data);
            i18n.setMessages('messages', language, data, 'nplurals=2; plural=n>1;');
        });

        const getQueryParams = (params, url, default_value) => {
            let href = url;
            //this expression is to get the query strings
            let reg = new RegExp('[?&]' + params + '=([^&#]*)', 'i');
            let queryString = reg.exec(href);
            return queryString ? queryString[1] : default_value;
        }; // source: https://dev.to/ganeshmani/how-to-get-query-string-parameters-in-javascript-2019-4dm2 .

        // We extract the language; 'en' is the default one.
        var lang = getQueryParams('lang', window.location, 'en');

        i18n.setLocale(lang); // We set language for the UI.

        QUESTIONS = [
            {
                'type': 'text',
                'label_for': 'name',
                'label_value': 'Name',
                'name': 'name',
                'id': 'name',
                'placeholder': 'Enter your name'
            },
            {
                'type': 'text',
                'label_for': 'phone',
                'label_value': 'Phone',
                'name': 'phone',
                'id': 'phone',
                'placeholder': 'Enter your phone'
            },
            {//Q3
                'type': 'radio',
                'choices': $.map(['Online', 'By phone', 'Could not contact by phone'], _c),
                'label_for': 'survey_performed_using',
                'label_value': i18n.gettext('How was this survey performed?'),
                'name': 'survey_performed_using',
                'id': 'survey_performed_using'
            },

            {//Q4
                'type': 'radio',
                'choices': $.map(['English', 'Español', 'Français', "中文", 'русский', '한국어'], _c),
                'label_for': 'language_used',
                'label_value': i18n.gettext('Language used for this survey'),
                'name': 'language_used',
                'id': 'language_used'
            },
            {//Q5
                'type': 'radio',
                'choices': $.map(['Yes', 'No'], _c),
                'label_for': 'permission0',
                'label_value': i18n.gettext("We're collecting information about your needs, such as health conditions, in order to connect you with resources. Do we have consent from you to record this information for our support team to get you resources? Your responses will only be kept within our support team."),
                'name': 'permission0',
                'id': 'permission0'
            },

            {//Q6
                'type': 'check',
                'choices': $.map(['Under 1 year old', '1 - 5 years old', '6 - 11 years old', '12 - 24 years old', '25 - 35 years old', '36 - 50 years old', '51 - 65 years old', 'older than 65'], _c),
                'label_for': 'age',
                'label_value': i18n.gettext('What are the ages of you and everyone in your household? (Check the box of each age range that applies, the total number of members in the household is not relevant)'),
                'name': 'age',
                'id': 'age'
            },
            {//Q7
                'type': 'check',
                'choices': $.map(['Fever', 'Chills', 'Cough', 'Difficulty breathing', 'Chest pain', 'Fatigue', 'Diarrhea', 'Not experiencing any symptoms'], _c),
                'label_for': 'symptoms',
                'label_value': i18n.gettext("Right now, are you or any members of your household experiencing symptoms consistent with Corona Virus infection? READ LIST BELOW.  IF ANSWER = DIFFICULTY BREATHING or CHEST PAIN, RESPONSE = 'CALL YOUR DOCTOR FIRST IF YOU HAVE ONE. IF YOU DO NOT HAVE A DOCTOR, CAN CALL: 1-844-NYC-4NYC (1-844-692-4692). IF THIS IS AN EMERGENCY, CALL 911.'"),
                'name': 'symptoms',
                'id': 'symptoms'
            },
            {//Q8
                'type': 'radio',
                'choices': $.map(['Yes', 'No'], _c),
                'label_for': 'medical_conditions',
                'label_value': i18n.gettext("Do you or any member of your household suffer from any of the following? [If ANY one of these, please indicate 'Yes'] READ LIST: High blood pressure, diabetes, heart disease or prior heart attack, lung disease (like asthma, COPD, emphysema, bronchitis), kidney disease or require dialysis, compromised immune system (eg. taking steroids or immunosuppressants, sickle cell disease, cancer, HIV/AIDS), psychiatric illness."),
                'name': 'medical_conditions',
                'id': 'medical_conditions'
            },
            {//Q9
                'type': 'radio',
                'choices': $.map(['Yes, and I CAN get in touch with them', 'Yes, but I CAN NOT get in touch with them', 'No'], _c),
                'label_for': 'PCP',
                'label_value': i18n.gettext("9. Do you have a primary care physician? This is the first person you should contact with your health concerns; unless it is an emergency, then dial 911."),
                'name': 'PCP',
                'id': 'PCP'
            },
            {//Q10
                'type': 'radio',
                'choices': $.map(['Yes, and I HAVE enough medicine or access to treatment', 'Yes, and I DO NOT HAVE enough medicine or access to treatment', 'No', 'Unsure'], _c),
                'label_for': 'meds',
                'label_value': i18n.gettext("Does anyone in your household require any essential medications or routine treatments? GIVE examples: Oxygen, breathing machine or breathing treatments, insulin, dialysis, blood thinners."),
                'name': 'meds',
                'id': 'meds'
            },
            {//Q11
                'type': 'radio',
                'choices': $.map(['Yes', 'No', 'Unsure'], _c),
                'label_for': 'access_to_healthcare',
                'label_value': i18n.gettext('Do you or any member of your household require access to a healthcare facility in the next three weeks?'),
                'name': 'access_to_healthcare',
                'id': 'access_to_healthcare'
            },
            {//Q12
                'type': 'radio',
                'choices': $.map(['Yes', 'No'], _c),
                'label_for': 'mobility',
                'label_value': i18n.gettext('Does anyone in your household require mobility assistance, such as a wheelchair?'),
                'name': 'mobility',
                'id': 'mobility'
            },
            {//Q13
                'type': 'radio',
                'choices': $.map(['Yes', 'No'], _c),
                'label_for': 'psych_health',
                'label_value': i18n.gettext('This is a chaotic time which can feel overwhelming and anxious. Do you feel speaking to a counselor would be helpful?   If yes, can call NYC mental health/counseling support: +1 (844) 863-9314. Alternatively, can call NYC Well 24/7/365 at 1-888-NYC-WELL (1-888-692-9355) or text WELL to 65173'),
                'name': 'psych_health',
                'id': 'psych_health'
            },
            {//Q14
                'type': 'text',
                'label_for': 'email',
                'label_value': 'Can we have your email address so that we can follow up with you with Coronavirus information and resources?',
                'name': 'email',
                'id': 'email',
                'placeholder': 'Enter your email here'
            },
            {//Q15
                'type': 'text',
                'label_for': 'address',
                'label_value': 'Can we have your address or building number?',
                'name': 'address',
                'id': 'address',
                'placeholder': 'Enter your address here'
            },
            {//Q16
                'type': 'text',
                'label_for': 'zip_code',
                'label_value': 'Can we have your zip code?',
                'name': 'zip_code',
                'id': 'zip_code',
                'placeholder': 'Enter your zip code here'
            },
            {//Q17
                'type': 'radio',
                'choices': $.map(['Yes', 'No'], _c),
                'label_for': 'permission1',
                'label_value': i18n.gettext('We have asked you a number of questions today to help organize resources for you during these challenging times. To confirm, do you consent to us documenting this information? Your responses will only be kept within our support team.'),
                'name': 'permission1',
                'id': 'permission1'
            },
            {//Q18
                'type': 'text',
                'label_for': 'notes',
                'label_value': 'We understand that at this time there is a lot a fear associated with the Corona Virus. By participating in this survey we are making sure that you, your family, and friends have the most accurate information available at this time, and access the support you need to address the symptoms of the virus. Finally by sharing your needs with us we will work to make sure Red Hook receives all the support and resources necessary to get through this crisis period. You can stay up to date on all Coronavirus related news and resources at www.redhookhub.org. Please share anything else below:',
                'name': 'notes',
                'id': 'notes',
                'placeholder': 'Short answer here'
            },

        ];


        $(document).ready(function () {
            $.each(QUESTIONS, function (index, value) {
                var template = null;
                if (value['type'] == 'text') {
                    template = $('#text-field-template').html();
                } else if (value['type'] == 'radio') {
                    template = $('#radio-field-template').html();
                } else if (value['type'] == 'check') {
                    template = $('#check-field-template').html();
                }

                var templateScript = Handlebars.compile(template);
                var context = value;
                var html = templateScript(context);
                $('#survey_questions').append(html);

                $('#survey_questions').append('<div class="row d-flex justify-content-center debug"><hr/></div>');

            });

        });
    </script>
</body>

</html>